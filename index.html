<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Ev&#039;ry Day I&#039;m Woffling!</title>

        <link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Fira+Mono" rel="stylesheet">
        <link rel="stylesheet" href="https://karetsu.github.io/woffle/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://karetsu.github.io/woffle/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://karetsu.github.io/woffle/css/github.css">
        <link rel="stylesheet" href="https://karetsu.github.io/woffle/css/main.css">
    </head>
    <body>

        <header class="site-header">
            <div class="site-branding">
                <h1 class="site-name">
                    <a href="https://karetsu.github.io/woffle" >Ev&#039;ry Day I&#039;m Woffling!</a>&nbsp;&nbsp;<i class="fa fa-american-sign-language-interpreting"></i>
                </h1>
                <h2 class="site-description">An NLP meta-API for dummies</h2>
            </div>

            <div class="button-line">
                <a href="https://github.com/karetsu/woffle" target="_blank" class="btn btn-default">View on GitHub</a>
                <a href="https://github.com/karetsu/woffle/zipball/master" class="btn btn-default hidden-xs">Download .zip</a>
                <a href="https://github.com/karetsu/woffle/tarball/master" class="btn btn-default hidden-xs">Download .tar.gz</a>
            </div>

                            <a href="https://github.com/karetsu/woffle">
                    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
                </a>
            
            <div class="text-left visible-xs-block" style="margin-left: 15px;">
                <a href="#sidebar" data-toggle="collapse"><i class="fa fa-3x fa-bars" aria-hidden="true"></i></a>
            </div>
        </header>

        <main class="container-fluid">
            <div class="row">

                                    <nav id="sidebar" class="col-sm-3 col-lg-2 collapse in" role="navigation">
                                                    <p class="text-muted">
                                Main documentation
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="active">
                                        <a href="https://karetsu.github.io/woffle/index.html">
                                            <i class='fa fa-angle-right'></i> Home
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                Frequently Asked Questions
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="faq.html">
                                            <i class='fa fa-angle-right'></i> FAQ
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                Advanced topics
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="customfuncs.html">
                                            <i class='fa fa-angle-right'></i> Changing the defaults
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="custommodel.html">
                                            <i class='fa fa-angle-right'></i> Using a custom model
                                        </a>
                                    </li>
                                                            </ul>
                        
                    </nav>

                
                <section class="col-sm-9 col-lg-10 content">
                    <h2 id="welcome">Welcome</h2>
<p>Please note that this is an active project so some of the instructions are
incomplete and may not yet work. If you find one and there is not an issue
already raised for it then please do so.</p>
<h2 id="introduction">Introduction</h2>
<p><code>woffle</code> is a meta-API which allows you to compose various NLP tasks via a
common interface using each of the most popular currently available tools. This
includes</p>
<ul>
<li><a href="https://spacy.io">spaCy</a></li>
<li><a href="https://github.com/facebookresearch/fasttext">fastText</a></li>
<li><a href="https://github.com/zolandoresearch/flair">flair</a></li>
<li>others coming soon</li>
</ul>
<p>The project was borne out of frustrations in trying to remember all of the
methods and attributes of each of these different programs. I intend to have the
program broken down into composable tasks where each task takes some 'sensible'
default operations and when you import a specific part of the tool then it only
exposes that one thing and these tasks will be separated by whether they are
deterministic processing or whether the output is probabilistically generated
(it makes it easier to control what models are left hanging around).</p>
<p>Currently the tasks we aim to perform are</p>
<ul>
<li><strong>parsing</strong>
including replacement of a list of regex strings defined in a configuration file</li>
<li><strong>embedding</strong>
not only generating numeric vectors from your text using fasttext, spacy's
gloVe implementation and similar but I envision that this should also include
tasks such as topic modelling and semantic analysis purely because they are
mappings from your text into some kind of representation space</li>
<li><strong>clustering</strong>
deterministic (e.g. Ward linkage) clustering and proabilitistic clustering
will be included</li>
<li><strong>selection</strong>
the ability to replace the content of a cluster with a representative 'label',
in optimus this is based on functions of the cluster based on decisions on the
content of the cluster but this could be as simple as replacing the the
cluster with its sentiment score</li>
</ul>
<p>These functions will be called the same thing regardless of which back end you
use and most importantly they will be composable so that you can chain
deterministic and probabilistic functions together, where it makes sense.</p>
<p>A type checking tool (<a href="https://pyre-check.org">pyre</a>) will be available to ensure
that any custom pipelines have functions of the same type before the program
runs to prevent any late exceptions being raised.</p>
<h2 id="installation">Installation</h2>
<p>This program is intended for use on modern linux and macOS operating systems. If
you wish to install it then perform the following actions to get a working
environment including an installation of fasttext, flair and spacy.</p>
<pre><code class="language-sh">git clone https://github.com/karetsu/woffle
cd woffle
make</code></pre>
<p>If you also wish to download the <code>wiki.en.zip</code> vectors for fasttext then also do</p>
<pre><code class="language-sh">make ftmodel</code></pre>
<p>and if you do not have a CUDA enabled GPU then you may wish to use the flair
models which are optimised for running on CPUs instead</p>
<pre><code class="language-sh">make flair-fast</code></pre>
<h2 id="usage">Usage</h2>
<p>This program is intended to give you a common toolkit without needing to know
the model specific commands to perform the tasks. In order to use the program it
is currently recommended to do a</p>
<pre><code class="language-sh">git clone https://github.com/karetsu/woffle myProjectName</code></pre>
<p>so that it provides a working directory for specific projects. Included is an
example of how you would use the tool to do some simple parsing of an example
dataset and return the cleaned target phrase for the sentence using a
combination of deterministic (i.e. regex replacements )and probabilistic parsing
(using spaCy) to achieve this goal.</p>
<p>The minimum example in order to clean text using spacy to identify nouns,
selecting the first noun it encounters and doing a little cleaning is</p>
<pre><code class="language-python">from woffle                   import data
from woffle.functions.compose import compose
from woffle.models            import spacy   as model

fp = 'data/test.txt'
text = [i.replace('\n','') for i in open(fp, 'r').readlines()]

clean = compose(model.parse, data.parse)
cleaned = [clean(line) for line in text]

for i, j in zip(text, cleaned):
    print(f"{i} -&gt; {j}")</code></pre>
<p>For a more complex example which also incorporates text embedding, clustering
and relabelling clusters in a fashion similar to
<a href="https://github.com/datasciencecampus/optimus">optimus</a> see <code>main.py</code>.</p>
                </section>

            </div>
        </main>

        <footer class="site-footer">
            <div class="top-bar-line"></div>
            <div class="bottom-panel">
                <div class="text-center">
            <span>
                                    Made by karetsu | Compiled with CousCous
                                                </span>
                </div><!-- text-center -->
            </div><!-- bottom-panel -->
        </footer>


        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <script src="https://karetsu.github.io/woffle/js/highlight.pack.js"></script>

        <script>
            hljs.initHighlighting();

            function checkWidth($highlight) {
                if ($(window).width() < 768) {
                    $highlight.addClass('collapse');
                } else {
                    $highlight.removeClass('collapse');
                }
            }

            $(document).ready(function () {
                var $highlights = $('.hljs');
                $highlights.each(function (index) {
                    var $this = $(this).parent();
                    var elementId = 'hljs' + index;
                    $this.attr('id', elementId);
                    $this.before('<a class="visible-xs-inline visible-sm-inline" href="#' + elementId + '" data-toggle="collapse"><i class="fa fa-expand"></i>&nbsp;Toggle source code ...</a>');

                    checkWidth($this);
                    $(window).resize(function () {
                        checkWidth($this);
                    });
                });
            });

            
        </script>

    </body>
</html>
